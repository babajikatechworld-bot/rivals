<!DOCTYPE html>
<html lang="en">

<head>
<script>
// Simple sanitizeHTML utility to prevent basic HTML injection in inserted content.
function sanitizeHTML(input) {
    if (input === undefined || input === null) return '';
    var s = String(input);
    var div = document.createElement('div');
    div.textContent = s;
    return div.innerHTML;
}
</script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Gaming Tournament</title>

    <!-- Icons and Fonts -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Swiper CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        /* --- CSS Styles --- */
        :root {
            --primary-bg: #0F172A; /* Dark blue-gray */
            --secondary-bg: #1E293B; /* Slightly lighter blue-gray */
            --card-bg: #1E293B;
            --text-primary: #E2E8F0; /* Light gray for primary text */
            --text-secondary: #94A3B8; /* Muted gray for secondary text */
            --accent-color: #FACC15; /* Yellow accent */
            --accent-gradient: linear-gradient(to right, #FACC15, #FBBF24);
            --primary-button-bg: #3B82F6; /* Blue for primary actions */
            --border-color: #334155; /* Border color */
            --bottom-nav-bg: #1E293B;
            --success-color: #10B981; /* Green for success */
            --danger-color: #EF4444; /* Red for danger/errors */
            --warning-color: #F59E0B; /* Orange for warnings */
            --info-color: #3B82F6; /* Blue for info */
            --login-purple-gradient: linear-gradient(135deg, #6B21A8, #A21CAF);
        }
        
        html, body {
            overflow-x: hidden;
            overscroll-behavior-x: none;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { font-size: 16px; scroll-behavior: smooth; }
        body { font-family: 'Poppins', sans-serif; background-color: var(--primary-bg); color: var(--text-primary); padding-top: 70px; padding-bottom: 75px; min-height: 100vh; overscroll-behavior-y: contain; transition: background-color 0.3s, padding 0.3s; }
        
        body.details-active {
            padding-bottom: 90px;
        }

        a { color: var(--accent-color); text-decoration: none; } a:hover { color: #FBBF24; }
        .main-content { padding: 15px; } .section { display: none; animation: fadeIn 0.3s ease-in-out; } .section.active { display: block; } @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to: { opacity: 1; transform: translateY(0); } }
        .section-title { font-size: 1.1rem; font-weight: 600; margin-bottom: 15px; color: var(--text-primary); } .custom-card { background-color: var(--card-bg); border-radius: 10px; padding: 15px; margin-bottom: 15px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); border: 1px solid var(--border-color); } .btn-custom { border-radius: 6px; font-size: 0.9rem; font-weight: 500; padding: 10px 15px; border: none; display: inline-flex; align-items: center; justify-content: center; gap: 8px; transition: all 0.2s ease-out; } .btn-custom-primary { background-color: var(--primary-button-bg); color: var(--text-primary); } .btn-custom-primary:hover { background-color: #2563EB; filter: brightness(1.1); } .btn-custom-secondary { background-color: var(--secondary-bg); color: var(--text-primary); border: 1px solid var(--border-color); } .btn-custom-secondary:hover { background-color: #334155; } .btn-custom-accent { background: var(--accent-gradient); color: var(--primary-bg); font-weight: 600; } .btn-custom-accent:hover { filter: brightness(1.1); } .btn-custom:active { transform: scale(0.97); filter: brightness(0.95); } .btn-custom-link { background: none; border: none; color: var(--primary-button-bg); font-size: 0.9rem; font-weight: 500; padding: 0; cursor: pointer; } .text-accent { color: var(--accent-color); } .text-success { color: var(--success-color); } .text-danger { color: var(--danger-color); } .text-warning { color: var(--warning-color); } .form-control { background-color: var(--primary-bg); border: 1px solid var(--border-color); color: var(--text-primary); border-radius: 6px; } .form-control:focus { background-color: var(--primary-bg); border-color: var(--accent-color); color: var(--text-primary); box-shadow: 0 0 0 0.2rem rgba(250, 204, 21, 0.25); } .form-control::placeholder { color: var(--text-secondary); opacity: 0.7; } .form-label { color: var(--text-secondary); font-size: 0.9rem; } .alert { border-radius: 6px; font-size: 0.9rem; }

        .list-group-item {
            background-color: transparent;
            color: var(--text-primary);
            border: none;
            padding: 15px;
            font-size: 1.1rem;
            transition: background-color 0.2s ease;
        }
        .list-group-item:not(:first-child) {
            border-top: 1px solid var(--border-color);
        }
        .list-group-item:hover { background-color: rgba(255, 255, 255, 0.05); }
        .list-group-item i:first-child { color: var(--accent-color); margin-right: 15px; font-size: 1.1rem; width: 20px; text-align: center; }
        .list-group-item .bi-chevron-right { color: var(--text-secondary); font-size: 0.9rem; }

        /* =========== NEW LOADER STYLES START =========== */
        #globalLoaderEl {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 23, 42, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            transition: opacity 0.3s ease;
        }
        .spinner-border {
            width: 3rem;
            height: 3rem;
            color: var(--accent-color);
        }
        /* =========== NEW LOADER STYLES END =========== */
        
        .placeholder-glow .placeholder { background-color: rgba(51, 65, 85, 0.5); animation: placeholder-glow 2s ease-in-out infinite; } .placeholder { background-color: rgba(51, 65, 85, 0.5); border-radius: 4px; } @keyframes placeholder-glow { 0% { background-color: rgba(51, 65, 85, 0.5); } 50% { background-color: rgba(51, 65, 85, 0.7); } 100% { background-color: rgba(51, 65, 85, 0.5); } } .interactive-list-item { cursor: pointer; } .referral-code { font-family: monospace; letter-spacing: 1px; user-select: all; } .app-header { position: fixed; top: 0; left: 0; width: 100%; height: 60px; background-color: var(--secondary-bg); display: flex; align-items: center; justify-content: space-between; padding: 0 15px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); z-index: 1000; border-bottom: 1px solid var(--border-color); } .header-left { display: flex; align-items: center; gap: 10px; } .header-logo { width: 40px; height: 40px; border-radius: 50%; background-color: #fff; object-fit: cover; border: 1px solid var(--accent-color); } .header-title { font-size: 0.9rem; font-weight: 500; line-height: 1.2; } .header-title span { font-size: 0.75rem; color: var(--text-secondary); display: block; } .header-back-button { background: none; border: none; color: var(--text-primary); font-size: 1.4rem; margin-right: 5px; display: none; padding: 5px; } .header-right { display: flex; align-items: center; gap: 15px; } .notification-icon { font-size: 1.3rem; color: var(--text-primary); position: relative; background: none; border: none; padding: 0; } .notification-badge { position: absolute; top: -3px; right: -5px; background-color: var(--danger-color); color: white; font-size: 0.6rem; width: 15px; height: 15px; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-weight: bold; }
        .header-game-title { font-size: 1rem; font-weight: 600; color: var(--text-primary); margin-left: 10px; display: none; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

        .header-game-title {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .admin-status {
            display: flex;
            align-items: center;
            font-size: 0.8rem;
            font-weight: 500;
            padding: 4px 8px;
            border-radius: 12px;
            transition: all 0.3s ease;
        }
        .admin-status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 6px;
            transition: background-color 0.3s ease;
        }
        .admin-status.online {
            color: var(--success-color);
            background-color: rgba(16, 185, 129, 0.1);
        }
        .admin-status.online .admin-status-dot {
            background-color: var(--success-color);
        }
        .admin-status.offline {
            color: var(--text-secondary);
            background-color: rgba(148, 163, 184, 0.1);
        }
        .admin-status.offline .admin-status-dot {
            background-color: var(--text-secondary);
        }

        .wallet-chip {
            background: linear-gradient(145deg, #2a3a55, #1e293b);
            color: var(--text-primary);
            padding: 8px 16px;
            border-radius: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: 600;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3), inset 0 1px 1px rgba(255, 255, 255, 0.05);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;
            -webkit-tap-highlight-color: transparent;
            min-width: 90px;
            text-align: center;
        }

        .wallet-chip .currency-symbol {
            font-family: 'Arial', sans-serif;
            color: var(--text-primary);
            font-size: 1.1em;
            font-weight: 700;
            margin-right: 4px;
        }

        .wallet-chip::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 75%;
            height: 100%;
            background: linear-gradient(100deg, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0) 100%);
            transform: skewX(-25deg);
            transition: left 0.7s ease-in-out;
        }

        .wallet-chip:hover::before {
            left: 125%;
        }

        .wallet-chip:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4), inset 0 1px 1px rgba(255, 255, 255, 0.05);
        }

        .wallet-chip:active {
            transform: translateY(0px) scale(0.98);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3), inset 0 1px 1px rgba(255, 255, 255, 0.05);
        }

        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 65px;
            background-color: var(--bottom-nav-bg);
            display: flex;
            justify-content: space-around;
            align-items: center;
            box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.25);
            z-index: 1000;
            border-top: 1px solid var(--border-color);
            transition: transform 0.3s ease-in-out, display 0.3s; 
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            text-decoration: none;
            flex-basis: 0;
            flex-grow: 1;
            padding: 8px 0;
            transition: color 0.2s ease, transform 0.2s ease;
            border: none;
            background: none;
            cursor: pointer;
            height: 100%;
        }
        .nav-item i {
            font-size: 1.5rem;
            margin-bottom: 4px;
            line-height: 1;
        }
        .nav-item span {
            font-size: 0.7rem;
            font-weight: 500;
            line-height: 1;
        }
        .nav-item:hover {
            color: var(--text-primary);
        }
        .nav-item.active {
            color: var(--accent-color);
        }

        .swiper-container#promotionSliderEl { width: 100%; height: 200px; border-radius: 10px; margin-bottom: 25px; --swiper-pagination-color: var(--accent-color); --swiper-pagination-bullet-inactive-color: var(--text-secondary); --swiper-pagination-bullet-size: 8px; } .swiper-slide { background-color: var(--secondary-bg); border-radius: 10px; } .swiper-slide img { display: block; width: 100%; height: 100%; object-fit: cover; border-radius: 10px; }
        
        #gamesListEl.row {
            align-items: stretch;
        }
        .game-card {
            text-align: center;
            background-color: var(--card-bg);
            border-radius: 8px;
            overflow: hidden;
            padding: 0;
            border: 1px solid var(--border-color);
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        .game-card:hover { transform: translateY(-3px); box-shadow: 0 4px 8px rgba(0,0,0,0.2); }
        .game-card img {
            width: 100%;
            height: 110px;
            object-fit: cover;
            display: block;
        }
        .game-card span {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px 5px;
            font-weight: 500;
            font-size: 0.9rem;
            color: var(--text-primary);
            flex-grow: 1;
            min-height: 48px;
        }
        
        .tournament-tabs { display: flex; justify-content: space-around; background-color: var(--secondary-bg); padding: 5px; border-radius: 8px; margin-bottom: 15px; } .tab-item { color: var(--text-secondary); background: none; border: none; padding: 8px 10px; font-size: 0.85rem; font-weight: 600; border-radius: 6px; flex-grow: 1; text-align: center; cursor: pointer; transition: background-color 0.2s, color 0.2s; } .tab-item.active { background-color: var(--primary-button-bg); color: var(--text-primary); } .tab-item i { margin-right: 5px; }
        .tournament-card { background-color: var(--card-bg); border-radius: 12px; margin-bottom: 15px; padding: 0; border: 1px solid var(--border-color); overflow: hidden; }
        .tournament-banner-image { width: 100%; display: block; aspect-ratio: 16 / 9; object-fit: cover; background-color: var(--primary-bg); }
        .tournament-card-content { padding: 15px; }
        .tournament-card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; flex-wrap: wrap; gap: 5px; } .tournament-card-tags span { background-color: var(--primary-bg); color: var(--text-secondary); font-size: 0.7rem; font-weight: 500; padding: 3px 8px; border-radius: 4px; display: inline-block; border: 1px solid var(--border-color); margin-right: 4px; margin-bottom: 4px; } .tournament-card-timer { background-color: rgba(255, 255, 255, 0.1); color: var(--text-primary); font-size: 0.75rem; font-weight: 600; padding: 3px 8px; border-radius: 4px; } .tournament-card-title { font-size: 1rem; font-weight: 600; margin-bottom: 5px; display: flex; align-items: center; gap: 8px; color: var(--text-primary); } .tournament-card-title i { color: var(--accent-color); } .tournament-card-info { display: flex; justify-content: space-between; align-items: stretch; border-top: 1px dashed var(--border-color); border-bottom: 1px dashed var(--border-color); padding: 10px 0; margin: 10px 0; font-size: 0.8rem; } .info-item { text-align: center; flex: 1; padding: 0 5px; } .info-item span { display: block; color: var(--text-secondary); font-size: 0.7rem; margin-bottom: 2px; } .info-item strong { color: var(--text-primary); font-weight: 600; font-size: 0.9rem; } .info-item .prize-icon { color: var(--accent-color); font-size: 1.2rem; } .tournament-card-spots { font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 15px; } .tournament-card-spots span { font-weight: 600; } .progress { height: 6px; background-color: var(--primary-bg); border-radius: 3px; overflow: hidden; } .progress-bar { background-color: var(--warning-color); transition: width 0.3s ease; } .tournament-card-actions { display: grid; grid-template-columns: repeat(auto-fit, minmax(80px, 1fr)); gap: 10px; margin-top: 10px; } .tournament-card-actions .btn-sm { padding: 8px 10px; font-size: 0.85rem; width: 100%; } .tournament-card-actions .btn-join { background: var(--accent-gradient); color: var(--primary-bg); font-weight: 600; } .tournament-card-actions .btn-details { background-color: var(--secondary-bg); border: 1px solid var(--border-color); } .tournament-card-actions .btn-joined { background-color: var(--success-color); color: var(--text-primary); opacity: 0.8; } .tournament-card-actions .btn-disabled { background-color: var(--secondary-bg); opacity: 0.6; cursor: not-allowed; } .btn-idpass { background: var(--accent-gradient); color: var(--primary-bg); border: none; font-weight: 600; } .wallet-card { background: linear-gradient(145deg, var(--secondary-bg), var(--primary-bg)); border-radius: 10px; padding: 20px; border: 1px solid var(--border-color); } .wallet-card h2 { font-size: 1.2rem; font-weight: 600; margin-bottom: 25px; } .balance-item { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px dashed var(--border-color); } .balance-item:last-child { margin-bottom: 0; border-bottom: none; padding-bottom: 0; } .balance-item-label { font-size: 1.1rem; color: var(--text-secondary); } .balance-item-value { font-size: 1.1rem; font-weight: 600; }
        .balance-item-value .currency-symbol, #recentTransactionsListEl .currency-symbol, #transactionHistoryBodyEl .currency-symbol {
            font-family: 'Arial', sans-serif;
            margin-right: 2px;
        }
        .balance-item-action { min-width: 100px; text-align: right; } .balance-item-action .btn-custom-link { font-size: 0.85rem; color: var(--accent-color); padding: 5px; } .balance-item-action .btn-withdraw { background-color: var(--primary-button-bg); color: #fff; font-size: 0.8rem; padding: 5px 12px; border-radius: 5px; border: none; } #recentTransactionsListEl .custom-card { background-color: var(--secondary-bg); }
        .profile-header-card { background: linear-gradient(145deg, var(--secondary-bg), var(--primary-bg)); border-radius: 10px; padding: 20px; display: flex; flex-direction: column; align-items: center; text-align: center; margin-bottom: 20px; border: 1px solid var(--border-color); } .profile-avatar { width: 70px; height: 70px; border-radius: 50%; margin-bottom: 10px; border: 2px solid var(--accent-color); object-fit: cover; background-color: var(--primary-bg); }
        .profile-name { font-size: 1.1rem; font-weight: 600; margin-bottom: 2px; }
        .profile-name-container { display: flex; align-items: center; gap: 10px; }
        .edit-name-btn { background: none; border: none; color: var(--text-secondary); cursor: pointer; font-size: 1rem; }
        .edit-name-btn:hover { color: var(--text-primary); }
        .profile-email { font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 15px; word-break: break-all; } .profile-stats { display: flex; justify-content: space-around; width: 100%; border-top: 1px solid var(--border-color); padding-top: 15px; } .stat-item { text-align: center; flex: 1; } .stat-item strong { display: block; font-size: 1rem; font-weight: 600; } .stat-item span { font-size: 0.75rem; color: var(--text-secondary); }

        .profile-links .custom-card {
            padding: 0;
        }
        .profile-card-title {
            font-size: 0.9rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-secondary);
            margin-bottom: 10px;
            padding-left: 5px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .profile-card-title i {
            font-size: 1.2rem;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .profile-links .list-group {
            border: none;
        }

        .profile-links .form-switch .form-check-input { background-color: var(--secondary-bg); border-color: var(--border-color); background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='rgba%28255, 255, 255, 0.25%29'/%3e%3c/svg%3e"); } .profile-links .form-switch .form-check-input:checked { background-color: var(--accent-color); border-color: var(--accent-color); background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='%23fff'/%3e%3c/svg%3e"); }

        /* =========== LOGIN/SIGNUP STYLES FROM user.html =========== */
        #login-section { margin-top: 5vh; }
        #login-section .card { background-color: var(--card-bg); border: 1px solid var(--border-color); }
        #login-section .btn-primary { background-color: var(--primary-button-bg); border: none; }
        #login-section .btn-link { background: none; border: none; color: var(--accent-color); text-decoration: none; font-size: 0.9em; padding: 5px 0; }
        #login-section .btn-link:hover { text-decoration: underline; }
        #login-section .btn-success { background-color: var(--success-color); border: none; }
        #login-section .btn-danger { background-color: var(--danger-color); border: none; }
        #login-section .form-divider { text-align: center; margin: 20px 0; position: relative; color: var(--text-secondary); }
        #login-section .form-divider::before,
        #login-section .form-divider::after { content: ""; position: absolute; top: 50%; width: 40%; height: 1px; background-color: var(--border-color); }
        #login-section .form-divider::before { left: 0; }
        #login-section .form-divider::after { right: 0; }
        #login-section .form-divider span { background-color: var(--card-bg); padding: 0 10px; position: relative; z-index: 1; font-size: 0.8rem; font-weight: 500; }
        #login-section .card-title { color: var(--text-primary); }
        #googleSignInBtnMainEl { display: none; }

        .modal .input-group-wrapper {
            position: relative;
        }
        .modal .form-control {
            padding-right: 45px;
        }

        .modal-content { background-color: var(--secondary-bg); color: var(--text-primary); border: 1px solid var(--border-color); } .modal-header { border-bottom-color: var(--border-color); } .modal-footer { border-top-color: var(--border-color); } .btn-close-white { filter: invert(1) grayscale(100%) brightness(200%); } .modal-body .phonepe-number { color: var(--warning-color); font-weight: bold; user-select: text; } #policyModalBodyEl { line-height: 1.6; font-size: 1.1rem; white-space: pre-wrap; } #idPasswordModalEl .copy-btn { padding: 2px 6px; font-size: 0.8rem; margin-left: 8px; vertical-align: middle; } #policyModalBodyEl .copy-btn, #policyModalBodyEl #shareReferralBtn { padding: 4px 10px; font-size: 0.9rem; } #policyModalBodyEl #shareReferralBtn i, #policyModalBodyEl .copy-btn i { margin-right: 5px; } #securityWarning { background-color: var(--danger-color); color: white; padding: 10px 15px; text-align: center; font-size: 0.9rem; position: sticky; top: 60px; z-index: 999; border-bottom: 1px solid #a51d1d; } #securityWarning a { color: #ffdddd; text-decoration: underline; } #securityWarning button { background: none; border: 1px solid white; color: white; padding: 2px 8px; margin-left: 15px; font-size: 0.8rem; border-radius: 4px; cursor: pointer; }
        /* Recharge Flow Styles */
        .recharge-card { background-color: var(--secondary-bg); border-radius: 12px; padding: 20px; margin-bottom: 20px; border: 1px solid var(--border-color); }
        .amount-input-group { position: relative; }
        .amount-input-group .form-control { font-size: 2rem; font-weight: 700; padding-left: 35px; border: none; background: transparent; box-shadow: none; border-bottom: 2px solid var(--border-color); border-radius: 0; text-align: center; }
        .amount-input-group .rupee-symbol { position: absolute; left: 0; top: 50%; transform: translateY(-50%); font-size: 1.8rem; font-weight: 700; color: var(--text-secondary); }
        .amount-presets { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 20px; }
        .amount-preset-btn { background-color: var(--primary-bg); border: 1px solid var(--border-color); color: var(--text-primary); padding: 10px; border-radius: 8px; font-weight: 600; cursor: pointer; transition: background-color 0.2s, border-color 0.2s; }
        .amount-preset-btn:hover { background-color: var(--primary-button-bg); border-color: var(--primary-button-bg); }
        .payment-option-card { background-color: var(--primary-bg); border: 2px solid var(--border-color); border-radius: 8px; padding: 15px; display: flex; align-items: center; justify-content: space-between; cursor: pointer; transition: border-color 0.2s; margin-bottom: 15px; }
        .payment-option-card.selected { border-color: var(--accent-color); }
        .payment-option-card img { height: 25px; max-width: 80px; object-fit: contain; }
        .payment-option-card .form-check-input { float: right; margin-left: 10px; background-color: var(--secondary-bg); border-color: var(--border-color); box-shadow: none; }
        .payment-option-card .form-check-input:checked { background-color: var(--accent-color); border-color: var(--accent-color); }
        .payment-details-card { background-color: var(--primary-bg); border-radius: 8px; padding: 15px; border: 1px solid var(--border-color); }
        .payment-details-card .qr-code-container { width: 150px; height: 150px; padding: 8px; background: white; border-radius: 8px; }
        .payment-details-card .qr-code-container img { width: 100%; height: 100%; object-fit: contain; border-radius: 4px; }
        .vertical-stepper { position: relative; padding-left: 40px; margin-bottom: 20px; }
        .vertical-stepper::before { content: ''; position: absolute; left: 14px; top: 5px; bottom: 5px; width: 2px; background-color: var(--danger-color); }
        .vertical-stepper .step-icon { position: absolute; left: 0; top: 0; width: 30px; height: 30px; border-radius: 50%; background-color: var(--danger-color); color: white; display: flex; align-items: center; justify-content: center; }
        .step-content h5 { font-size: 1rem; font-weight: 600; margin-bottom: 5px; }
        .step-content p { font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 10px; }
        .step-content .form-control { background-color: var(--secondary-bg); }

        /* =========== NEW NOTIFICATION STYLES =========== */
        .notification-item {
            display: flex;
            gap: 15px;
            padding: 15px;
            background-color: var(--primary-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            margin-bottom: 10px;
            position: relative;
        }
        .notification-item-img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 8px;
            flex-shrink: 0;
        }
        .notification-item-content {
            flex-grow: 1;
        }
        .notification-item-title {
            font-weight: 600;
            font-size: 1rem;
            color: var(--text-primary);
            margin-bottom: 4px;
        }
        .notification-item-message {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }
        .notification-item-time {
            font-size: 0.75rem;
            color: var(--text-secondary);
            opacity: 0.8;
            margin-top: 8px;
        }
        .unread-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 10px;
            height: 10px;
            background-color: var(--accent-color);
            border-radius: 50%;
            border: 2px solid var(--secondary-bg);
        }

        /* =========== NEW LEADERBOARD STYLES =========== */
        .leaderboard-item {
            display: flex;
            align-items: center;
            padding: 10px;
            background-color: var(--secondary-bg);
            border-radius: 8px;
            margin-bottom: 10px;
            border: 1px solid var(--border-color);
            transition: background-color 0.2s ease;
        }
        .leaderboard-item:first-child {
            border: 1px solid var(--accent-color);
            box-shadow: 0 0 8px rgba(250, 204, 21, 0.3);
        }
        .leaderboard-rank {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text-secondary);
            width: 35px;
            text-align: center;
            flex-shrink: 0;
        }
        .leaderboard-item:first-child .leaderboard-rank {
            color: var(--accent-color);
            font-size: 1.3rem;
        }
        .leaderboard-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            object-fit: cover;
            margin-left: 10px;
            margin-right: 15px;
            border: 2px solid var(--border-color);
        }
        .leaderboard-user-info {
            flex-grow: 1;
            overflow: hidden; /* Prevent long names from breaking layout */
        }
        .leaderboard-name {
            font-weight: 600;
            font-size: 1.1rem;
            color: var(--text-primary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .leaderboard-earnings {
            font-weight: 600;
            font-size: 1rem;
            color: var(--accent-color);
            text-align: right;
            padding-left: 10px;
        }

        /* NEW CHAT STYLES */
        #chatMessagesEl {
            max-height: 50vh;
            overflow-y: auto;
            display: flex;
            flex-direction: column-reverse; /* Newest messages at the bottom */
            padding: 10px;
        }
        .chat-bubble {
            padding: 8px 14px;
            border-radius: 18px;
            margin-top: 10px;
            max-width: 80%;
            word-wrap: break-word;
            cursor: pointer;
        }
        .chat-bubble .sender-name {
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 2px;
            display: block;
        }
        .chat-bubble .msg-time {
             font-size: 0.7rem;
             opacity: 0.7;
             display: block;
             margin-top: 4px;
             text-align: right;
        }
        .my-message {
            background: var(--primary-button-bg);
            color: var(--text-primary);
            align-self: flex-end;
            border-bottom-right-radius: 4px;
        }
        .other-message {
            background: var(--secondary-bg);
            color: var(--text-primary);
            align-self: flex-start;
            border-bottom-left-radius: 4px;
            border: 1px solid var(--border-color);
        }
        .other-message .sender-name {
            color: var(--accent-color);
        }

        /* Reply feature styles */
        .reply-quote-block {
            background-color: rgba(0,0,0,0.2);
            padding: 8px;
            border-left: 3px solid var(--accent-color);
            border-radius: 4px;
            margin-bottom: 6px;
            font-size: 0.85rem;
        }
        .reply-quote-block .sender-name {
            font-weight: 700;
            color: var(--accent-color);
            display: block;
            font-size: 0.8rem;
        }
        .reply-quote-block p {
            margin: 0;
            opacity: 0.8;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        #chatReplyContextEl {
            background-color: var(--primary-bg);
            padding: 10px 15px;
            border-top: 1px solid var(--border-color);
        }
        .reply-context-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        .reply-context-header strong {
            color: var(--accent-color);
        }
        #chatReplyContextEl p {
            font-size: 0.9rem;
            margin: 4px 0 0 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            opacity: 0.9;
        }
        #cancelReplyBtn {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 1.5rem;
            line-height: 1;
            padding: 0 5px;
        }

        .wallet-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 25px;
        }

        #addAmountWalletBtnEl, #withdrawBtnEl {
            color: #FFFFFF;
        }
        #addAmountWalletBtnEl {
            background: var(--accent-gradient);
            color: var(--primary-bg);
        }
        #withdrawBtnEl {
            background-color: var(--primary-button-bg);
        }

        #liveChatMessagesEl {
            height: 65vh;
            overflow-y: auto;
            display: flex;
            flex-direction: column-reverse;
            padding: 15px;
            background-color: var(--primary-bg);
            border-radius: 8px 8px 0 0;
        }
        #live-support-section .custom-card {
            padding: 0;
        }
        .live-chat-footer {
            padding: 15px;
            background-color: var(--card-bg);
            border-top: 1px solid var(--border-color);
            border-radius: 0 0 8px 8px;
        }
        .chat-bubble-live {
            padding: 10px 16px;
            border-radius: 20px;
            margin-top: 10px;
            max-width: 85%;
            word-wrap: break-word;
            line-height: 1.4;
        }
        .chat-bubble-live .msg-time-live {
             font-size: 0.7rem;
             opacity: 0.7;
             display: block;
             margin-top: 5px;
             text-align: right;
        }
        .user-message {
            background: var(--primary-button-bg);
            color: var(--text-primary);
            align-self: flex-end;
            border-bottom-right-radius: 5px;
        }

        .admin-message {
            background: var(--secondary-bg);
            color: var(--text-primary);
            align-self: flex-start;
            border-bottom-left-radius: 5px;
            border: 1px solid var(--border-color);
            display: flex;
            gap: 10px;
            align-items: flex-start;
            padding: 10px;
        }
        .admin-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            object-fit: cover;
            flex-shrink: 0;
        }
        .admin-message-content {
             flex-grow: 1;
        }
        .admin-name {
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--accent-color);
            margin-bottom: 4px;
            display: block;
        }

        #myStatsModal .modal-content {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
        }
        #myStatsModal .modal-body {
            padding: 0;
        }
        .stats-container {
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .stat-card {
            background-color: var(--secondary-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 20px;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        .stat-card.active {
            transform: translateY(-8px) scale(1.03);
            border-color: var(--accent-color);
            box-shadow: 0 8px 25px rgba(250, 204, 21, 0.2);
        }
        .stat-card-icon {
            font-size: 3rem;
            color: var(--accent-color);
        }
        .stat-card-info {
            flex-grow: 1;
        }
        .stat-card-title {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin: 0;
        }
        .stat-card-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin: 0;
        }

        #promoCodeOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease-in-out;
        }

        #promoCodeOverlay.visible {
            opacity: 1;
            pointer-events: auto;
        }

        .promo-code-card {
            background: var(--secondary-bg);
            border: 1px solid var(--border-color);
            border-radius: 15px;
            width: 90%;
            max-width: 400px;
            padding: 30px 25px;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.4);
            transform: scale(0.95);
            transition: transform 0.3s ease-in-out;
        }

        #promoCodeOverlay.visible .promo-code-card {
            transform: scale(1);
        }

        .promo-code-close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 2rem;
            line-height: 1;
            cursor: pointer;
            transition: color 0.2s;
        }
        .promo-code-close-btn:hover {
            color: var(--text-primary);
        }
        
        .promo-card-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0 0 20px 0;
            text-align: left;
        }

        .promo-code-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .gift-icon-wrapper {
            width: 70px;
            height: 70px;
            margin: 0 auto 15px auto;
            background: transparent;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .gift-icon-wrapper i {
            font-size: 2.5rem;
            color: var(--accent-color);
        }

        .promo-code-body .form-group {
            margin-bottom: 20px;
        }

        .promo-code-body #promoCodeInput {
            text-align: center;
            font-size: 1.1rem;
            font-weight: 500;
            letter-spacing: 1px;
            text-transform: uppercase;
            padding: 12px;
        }

        .promo-code-status {
            font-size: 0.85rem;
            text-align: center;
            margin-top: 10px;
            min-height: 20px;
            font-weight: 500;
        }
        .promo-code-status.text-danger { color: var(--danger-color); }
        .promo-code-status.text-success { color: var(--success-color); }
        
        .my-matches-section {
            margin-bottom: 25px;
        }

        .matches-container {
            display: flex;
            justify-content: space-between;
            gap: 10px;
        }

        .match-box {
            background-color: var(--secondary-bg);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            flex-grow: 1;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            border: 1px solid var(--border-color);
        }

        .match-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .match-box i {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--accent-color);
        }

        .match-box span {
            font-weight: 500;
            font-size: 0.85rem;
            color: var(--text-primary);
        }
        
        #myMatchesEmptyStateEl {
            text-align: center;
            padding: 50px 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: calc(100vh - 200px);
        }
        
        #myMatchesEmptyStateEl h4 {
            color: var(--accent-color);
            font-weight: 600;
            font-size: 1.2rem;
            margin-bottom: 10px;
        }

        #myMatchesEmptyStateEl p {
            max-width: 300px;
            color: var(--text-secondary);
            font-size: 1.1rem;
        }
        
        #match-details-section .main-content-inner {
            padding: 0;
        }

        .details-banner {
            width: 100%;
            aspect-ratio: 16 / 10;
            object-fit: cover;
            border-radius: 0 0 15px 15px;
        }

        .details-content-wrapper {
            padding: 15px;
            transform: translateY(-20px);
        }

        .details-header h2 {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 8px;
            text-align: center;
        }

        .details-header p {
            font-size: 0.9rem;
            color: var(--text-secondary);
            text-align: center;
            margin-bottom: 20px;
        }

        .details-info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 12px;
        }

        .info-box {
            background: var(--secondary-bg);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }
        
        .info-box.info-box-full-width {
            grid-column: 1 / -1;
        }

        .info-box span {
            display: block;
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }

        .info-box strong {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .details-schedule-card {
            background: var(--secondary-bg);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .details-section-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-secondary);
            margin-top: 30px;
            margin-bottom: 15px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .details-prize-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 12px;
        }
        
        .details-rules {
            background: var(--secondary-bg);
            border-radius: 8px;
            padding: 15px;
            font-size: 0.9rem;
            line-height: 1.6;
            color: var(--text-secondary);
        }

        .details-rules pre {
            white-space: pre-wrap;
            word-wrap: break-word;
            font-family: inherit;
            font-size: inherit;
            margin: 0;
            color: inherit;
        }

        .details-footer-actions {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 15px;
            background: var(--primary-bg);
            box-shadow: 0 -2px 10px rgba(0,0,0,0.3);
            display: flex;
            gap: 10px;
            z-index: 1001;
        }
        /* bottom navigation background color change */
.bottom-nav {
  background-color: #212b39;  /* apna desired color likho */
  border-top: 1px solid #222; /* optional light border */
}

/* active icon ke liye color change (optional) */
.bottom-nav a.active, 
.bottom-nav button.active {
  color: #ffcc00; /* active icon ka color */
}

/* hover effect (optional) */
.bottom-nav a:hover {
  background-color: #2c333e;
}
.bottom-nav {
  background-color:#171717;
  backdrop-filter: blur(6px);
}

    
/* match-details: make Join button inline (not fixed) so content like Joined Players can appear below */
#match-details-section .details-footer-actions{
  position: static !important;
  width: 100%;
  padding: 15px 0 0;
  background: transparent;
  box-shadow: none;
}

/* Centered layout for Joined Players header & rows */
#joinedPlayersSection #joinedPlayersBody{
  margin-top: 4px;
}
#joinedPlayersSection .joined-players-header,
#joinedPlayersSection #joinedPlayersList > div{
  max-width: 260px;
  margin-left: auto;
  margin-right: auto;
}
#joinedPlayersSection #joinedPlayersList > div{
  padding: 4px 0;
}
#joinedPlayersSection #joinedPlayersList > div span:last-child{
  text-align: left;
}
</style>

    
<style>
/* news-visibility (v6 stronger) */
#news-section .custom-card {
  background: #121212 !important;
  color: #e5e7eb !important;
  border-radius: 16px !important;
  border: 1px solid rgba(255,255,255,0.08) !important;
  box-shadow: 0 2px 10px rgba(0,0,0,0.35) !important;
}
#news-section .custom-card .p-3{ padding:18px !important; }
#news-section .custom-card h5{ 
  color:#ffffff !important;
  font-weight:700 !important; 
  letter-spacing: .2px !important;
  margin-bottom: 8px !important;
}
#news-section .custom-card p{ 
  color:#cbd5e1 !important;
  margin-bottom: 10px !important;
}
#news-section .custom-card .text-secondary{ 
  color:#94a3b8 !important;
}
#news-section .custom-card img{
  display:block !important;
  width:100% !important;
  height:160px !important;
  object-fit:cover !important;
  border-radius:16px 16px 0 0 !important;
  background: #0f172a !important;
  border-bottom: 1px solid rgba(255,255,255,0.06) !important;
}
/* spacing */
#newsListEl > .col-12{ padding-left: 0 !important; padding-right: 0 !important; margin-bottom: 18px !important; }
@media (min-width: 576px){
  #newsListEl > .col-12{ margin-bottom: 22px !important; }
}
</style>

    

    <style>
    /* news-load-more */
    #newsLoadMoreBtn{ display:none; border-color: rgba(255,255,255,.2); color:#e5e7eb; }
    #newsLoadMoreBtn:hover{ border-color:#e5e7eb; }
    </style>
    

<style>
/* v8: hide WELCOME header text */
#headerTitleContainerEl{display:inline-block!important;margin-left:10px;font-size:0!important;}
/* make the logo clickable */
#appLogoEl{ cursor:pointer; }
</style>


<style>
/* v9: show only user's name next to logo */
#headerTitleContainerEl{display:inline-block!important;margin-left:10px;font-size:0!important;}
#headerTitleContainerEl #headerUserGreetingEl{
  font-size:15px !important;
  color:#adbdd2 !important;
  font-weight:600 !important;
  letter-spacing:.2px;
}
#appLogoEl{ cursor:pointer; }
</style>


<style>
/* v10: Leaderboard icon center and larger */
#navLeaderboardBtn {
  display:flex !important;
  justify-content:center !important;
  align-items:center !important;
  height:70px !important;
}
#navLeaderboardBtn i {
  font-size:32px !important;
  display:flex !important;
  justify-content:center !important;
  align-items:center !important;
  height:60px !important;
  width:60px !important;
  margin:0 auto !important;
}
</style>


<!-- v11 perf: DNS-prefetch + preconnect -->
<link rel="dns-prefetch" href="https://www.gstatic.com">
<link rel="dns-prefetch" href="https://www.googleapis.com">
<link rel="dns-prefetch" href="https://www.googletagmanager.com">
<link rel="dns-prefetch" href="https://www.google-analytics.com">
<link rel="dns-prefetch" href="https://fonts.googleapis.com">
<link rel="dns-prefetch" href="https://fonts.gstatic.com">
<link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
<link rel="preconnect" href="https://www.gstatic.com" crossorigin>
<link rel="preconnect" href="https://www.googleapis.com" crossorigin>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>


<style>
/* v11 perf: reduce layout shifts */
img[loading="lazy"]{ content-visibility:auto; contain-intrinsic-size: 160px 300px; }
.section{ contain: content; }
</style>


<style>
/* v12: square logo, remove border */
#appLogoEl {
  border: none !important;
  border-radius: 0 !important;
  background: transparent !important;
  object-fit: contain !important;
  width: 48px !important;
  height: 48px !important;
}
</style>


<style>
/* v13: bigger square logo, smaller username, clickable */
#appLogoEl{
  width:55px !important;
  height:55px !important;
  border:none !important;
  border-radius:0 !important;
  background:transparent !important;
  object-fit:contain !important;
}
#headerUserGreetingEl{
  font-size:16px !important;
  font-weight:500 !important;
  color:#9ca3af !important;
  cursor:pointer !important;
  margin-left:6px !important;
}
</style>


<style>
.signup-warning-banner {
    width: 100%;
    background: rgba(255, 0, 0, 0.13);
    border-left: 4px solid #ff3b3b;
    padding: 10px 14px;
    margin-bottom: 18px;
    border-radius: 6px;
    display: flex;
    align-items: flex-start;
    gap: 10px;
}
.signup-warning-icon {
    color: #ff3b3b;
    font-size: 18px;
    margin-top: 2px;
}
.signup-warning-banner p {
    color: #b3b3b3;
    font-size: 14px;
    margin: 0;
    line-height:1.4;
}
</style>

</head>

<body>

    <!-- Audio Elements for Background Music and Click Sound -->
<audio id="backgroundMusic" loop>
    <source src="audio/Free Fire _ Halloween Update _ Theme Song(MP3_160K).mp3" type="audio/mpeg">
</audio>
<audio id="clickSound">
    <source src="audio/click.mp3" type="audio/mpeg">
</audio>

     <!-- Firebase Security Rules Warning -->
    <div id="securityWarning" style="display: none;">
        <i class="bi bi-exclamation-triangle-fill"></i> <strong>Security Alert:</strong> Your database rules are insecure (public). Anyone can read/write data.
        <a href="https://firebase.google.com/docs/database/security" target="_blank" rel="noopener noreferrer">Learn how to secure rules.</a>
        <button onclick="this.parentElement.style.display='none'">Dismiss</button>
    </div>
<button id="newsLoadMoreBtn" class="btn btn-outline-secondary w-100 mt-3">Load More</button>

    <!-- Header -->
    <header class="app-header">
        <div class="header-left">
            <button class="header-back-button" id="headerBackBtnEl"><i class="bi bi-arrow-left"></i></button>
            <img src="https://via.placeholder.com/40/FFFFFF/0F172A?text=G" alt="Logo" class="header-logo" id="appLogoEl">
            <div class="header-title" id="headerTitleContainerEl"> WELCOME <span id="headerUserGreetingEl">Guest</span> </div>
            <!-- NEW: Modified Header Title for Dynamic Content and Status Indicator -->
            <div class="header-game-title" id="headerGameTitleEl">
                <span id="headerDynamicTitleTextEl">Game Title</span>
                <span id="adminStatusIndicatorEl" class="admin-status offline" style="display: none;">
                    <span class="admin-status-dot"></span>
                    <span class="admin-status-text">Offline</span>
                </span>
            </div>
        </div>
        <div class="header-right">
            <button class="notification-icon" id="notificationBtnEl"> <i class="bi bi-bell-fill"></i> <span class="notification-badge" style="display: none;"></span> </button>
            <button class="wallet-chip" id="headerWalletChipEl" style="display: none;">
                <span class="currency-symbol"></span><span id="headerChipBalanceEl">0</span>
            </button>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="main-content">
        <!-- NEW LOADER HTML -->
        <div id="globalLoaderEl" style="display: none;">
            <div class="spinner-border" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>

        <!-- Login Section -->
        <section id="login-section" class="section">
             <div class="container" style="max-width: 450px;">
                <div class="card shadow-sm custom-card">
                    <div class="card-body p-4">
                        <!-- Login Form -->
                        <form id="emailLoginForm">
                            <h2 class="card-title text-center mb-4">Login</h2>
                            <div class="mb-3"> <label for="loginEmailInputEl" class="form-label">Email</label> <input type="email" class="form-control" id="loginEmailInputEl" placeholder="name@example.com" required> </div>
                            <div class="mb-3"> <label for="loginPasswordInputEl" class="form-label">Password</label> <input type="password" class="form-control" id="loginPasswordInputEl" placeholder="Password" required> </div>
                            <div id="loginStatusMessageEl" class="alert mt-3" style="display: none;"></div>
                            <div class="d-grid gap-2 mb-3"> <button type="button" class="btn btn-custom btn-custom-primary" id="loginEmailBtnEl">Login</button> <button type="button" class="btn-custom-link btn-sm p-0 text-center d-block" id="showSignupToggleBtnEl">Need an account? Sign Up</button> <a href="#" id="forgotPasswordLinkEl" class="text-center small mt-2 d-block" style="color: var(--text-secondary);">Forgot Password?</a> </div>
                        </form>

                        <!-- Signup Form (Initially Hidden) -->
                        <form id="emailSignupForm" style="display: none;">
                            <div class="signup-warning-banner">
  <span class="signup-warning-icon"></span>
  <p>
    You must enter the correct and complete information.
    We will cross-check these details before processing the winning payment.
  </p>
</div>
<h2 class="card-title text-center mb-4">Sign Up</h2>

                            <div class="mb-3"> <label for="signupNameInputEl" class="form-label">Name</label> <input type="text" class="form-control" id="signupNameInputEl" placeholder="Enter your name" required> </div>
                            <div class="mb-3"> <label for="signupEmailInputEl" class="form-label">Email</label> <input type="email" class="form-control" id="signupEmailInputEl" placeholder="name@example.com" required> </div>
                            <div class="mb-3"> <label for="signupPasswordInputEl" class="form-label">Password (min 6 chars)</label> <input type="password" class="form-control" id="signupPasswordInputEl" placeholder="Password" required minlength="6"> </div>
                            <div class="mb-3"> <label for="signupReferralCodeInputEl" class="form-label">Referral Code (Optional)</label> <input type="text" class="form-control" id="signupReferralCodeInputEl" placeholder="Enter referral code"> </div>
                            <div id="signupStatusMessageEl" class="alert mt-3" style="display: none;"></div>
                            <div class="d-grid gap-2 mb-3"> <button type="button" class="btn btn-custom btn-custom-accent" id="signupEmailBtnEl">Sign Up</button> <button type="button" class="btn-custom-link btn-sm p-0 text-center d-block" id="showLoginToggleBtnEl">Already have account? Login</button> </div>
                        </form>

                    </div>
                </div>
            </div>
        </section>

        <!-- Home Section -->
        <section id="home-section" class="section">
            <!-- Promotion Slider -->
            <div class="swiper-container" id="promotionSliderEl">
                <div class="swiper-wrapper placeholder-glow">
                    <div class="swiper-slide"><span class="placeholder" style="display: block; width: 100%; height: 100%; border-radius: 10px;"></span></div>
                 </div>
                 <!-- DOTS ELEMENT REMOVED -->
            </div>
            
             <!-- My Matches Section -->
            <div class="my-matches-section">
                <h2 class="section-title">My Matches</h2>
                <div class="matches-container">
                    <div class="match-box" data-status="ongoing">
                        <i class="bi bi-play-circle-fill"></i>
                        <span>Ongoing</span>
                    </div>
                    <div class="match-box" data-status="upcoming">
                        <i class="bi bi-calendar-event-fill"></i>
                        <span>Upcoming</span>
                    </div>
                    <div class="match-box" data-status="completed">
                        <i class="bi bi-trophy-fill"></i>
                        <span>Completed</span>
                    </div>
                </div>
            </div>

            <!-- Esport Games -->
            <h2 class="section-title">Esport Games</h2>
            <div class="row g-2 mb-4 placeholder-glow" id="gamesListEl">
                <!-- Placeholder Game Cards -->
                 <div class="col-4"> <div class="game-card custom-card"><span class="placeholder d-block" style="height: 110px; border-radius: 8px;"></span><span class="placeholder d-block mt-2 col-8 mx-auto" style="height: 20px;"></span></div> </div>
                 <div class="col-4"> <div class="game-card custom-card"><span class="placeholder d-block" style="height: 110px; border-radius: 8px;"></span><span class="placeholder d-block mt-2 col-8 mx-auto" style="height: 20px;"></span></div> </div>
                 <div class="col-4"> <div class="game-card custom-card"><span class="placeholder d-block" style="height: 110px; border-radius: 8px;"></span><span class="placeholder d-block mt-2 col-8 mx-auto" style="height: 20px;"></span></div> </div>
            </div>
        </section>

        <!-- Tournaments Section -->
        <section id="tournaments-section" class="section">
            <div class="tournament-tabs"> <button class="tab-item active" data-status="upcoming"><i class="bi bi-calendar-event-fill"></i> Upcoming</button> <button class="tab-item" data-status="ongoing"><i class="bi bi-play-circle-fill"></i> Ongoing</button> <button class="tab-item" data-status="completed"><i class="bi bi-trophy-fill"></i> Results</button> </div>
            <div id="tournamentsListContainerEl" class="mt-3 placeholder-glow"> <div class="tournament-card placeholder-glow mb-3"> <div class="tournament-card-content"> <span class="placeholder col-6" style="height: 18px;"></span> <span class="placeholder col-12 mt-2" style="height: 24px;"></span> <span class="placeholder col-10 mt-2" style="height: 16px;"></span> <div class="d-flex justify-content-between mt-3"> <span class="placeholder col-4" style="height: 30px; border-radius: 6px;"></span> <span class="placeholder col-4" style="height: 30px; border-radius: 6px;"></span> </div> </div> </div> </div>
            <p id="noTournamentsMessageEl" class="text-secondary text-center mt-4" style="display: none;">No tournaments found.</p>
        </section>
        
        <!-- =================================== -->
        <!-- == NEW MY MATCHES DISPLAY SECTION == -->
        <!-- =================================== -->
        <section id="my-matches-display-section" class="section">
            <div id="myMatchesDisplayListEl">
                <!-- Tournament cards will be rendered here by JS -->
            </div>
            <div id="myMatchesEmptyStateEl" style="display: none;">
                 <h4 id="myMatchesEmptyTitleEl"></h4>
                 <p id="myMatchesEmptySubtitleEl"></p>
            </div>
        </section>

        <!-- =========================================== -->
        <!-- == NEW PREMIUM MATCH DETAILS PAGE SECTION == -->
        <!-- =========================================== -->
        <section id="match-details-section" class="section">
            <div class="main-content-inner">
                <img loading="lazy" decoding="async" fetchpriority="low" src="" id="detailsBannerEl" alt="Tournament Banner" class="details-banner">
                <div class="details-content-wrapper">
                    <div class="details-header">
                        <h2 id="detailsTitleEl"></h2>
                        <p id="detailsSubtitleEl"></p>
                    </div>

                    <div class="details-info-grid">
                        <div class="info-box">
                            <span>Team</span>
                            <strong id="detailsModeEl"></strong>
                        </div>
                        <div class="info-box">
                            <span>Mode</span>
                            <strong id="detailsGameModeEl">BATTLE ROYALE</strong>
                        </div>
                        <div class="info-box">
                            <span>Entry Fee</span>
                            <strong id="detailsEntryFeeEl"></strong>
                        </div>
                        <div class="info-box" id="detailsSlotBox" style="display:none;">
                            <span>Slot</span>
                            <strong id="detailsSlotEl" style="color:#fbbe05;"></strong>
                        </div>
                    </div>

                    <div class="details-schedule-card">
                        <span class="d-block text-secondary small">Match Schedule</span>
                        <strong id="detailsScheduleEl"></strong>
                    </div>

                    <h3 class="details-section-title">Prize Details</h3>
                    <div class="details-prize-grid">
                        <div class="info-box">
                            <span>Prize Pool</span>
                            <strong id="detailsPrizePoolEl"></strong>
                        </div>
                         <div class="info-box">
                            <span>Per Kill</span>
                            <strong id="detailsPerKillEl"></strong>
                        </div>
                    </div>
                    
                    <h3 class="details-section-title">Match Rules</h3>
                    <div class="details-rules" id="detailsRulesEl"></div>

                    <div id="joinedPlayersSection" class="mt-4" style="padding: 12px 0 0; border-top: 1px solid rgba(255,255,255,0.06);">
                        <button id="joinedPlayersToggleBtn" class="btn btn-custom btn-custom-secondary w-100" style="margin-bottom:10px; display:flex;align-items:center;justify-content:space-between;">
                            <span style="font-size:0.9rem;font-weight:600;letter-spacing:.08em;">JOINED PLAYERS</span>
                            <span id="joinedPlayersArrow" style="font-size:0.95rem;"></span>
                        </button>
                        <div id="joinedPlayersBody" style="display:none;">
                            <div class="joined-players-header" style="display:flex;justify-content:space-between;font-size:1rem;color:#9ca3af;margin:4px auto;">
                                <span id="joinedPlayersLeftHeading">Slot</span>
                                <span id="joinedPlayersRightHeading">Player</span>
                            </div>
                            <div id="joinedPlayersList" style="font-size: 1.1rem; color: #f9fafb;"></div>
                        </div>
                    </div></div>
            </div>
             <!-- Action Footer -->
            <div class="details-footer-actions">
                <button class="btn btn-custom btn-custom-accent w-100" id="detailsJoinBtn">
                    Join Match
                </button>
            </div>
        </section>


        <!-- Wallet Section -->
        <section id="wallet-section" class="section">
            <div class="wallet-card custom-card">
                <h2 class="section-title mb-4">Wallet</h2>
                <div class="balance-item placeholder-glow">
                    <span class="balance-item-label">Deposit Balance</span>
                    <span class="balance-item-value" id="walletTotalBalanceEl"><span class="placeholder col-3"></span></span>
                    <div class="balance-item-action"> <button class="btn-custom-link" id="allTransactionsBtnEl">History <i class="bi bi-chevron-right"></i></button> </div>
                </div>
                <div class="balance-item placeholder-glow">
                    <span class="balance-item-label">Winning Cash</span>
                    <span class="balance-item-value" id="walletWinningCashEl"><span class="placeholder col-3"></span></span>
                    <div class="balance-item-action"></div>
                </div>
                <div class="balance-item placeholder-glow">
                    <span class="balance-item-label">Bonus Cash</span>
                    <span class="balance-item-value" id="walletBonusCashEl"><span class="placeholder col-3"></span></span>
                    <div class="balance-item-action" style="min-width: 100px;"></div>
                </div>

                <!-- =========== UPDATED BUTTON CONTAINER =========== -->
                <div class="wallet-actions">
                    <button id="addAmountWalletBtnEl" class="btn btn-custom">
                        <i class="bi bi-plus-circle-fill"></i> Add Amount
                    </button>
                    <button id="withdrawBtnEl" class="btn btn-custom">
                        <i class="bi bi-cash-coin"></i> Withdraw
                    </button>
                </div>
                <!-- ========================================== -->

            </div>
            <h3 class="section-title mt-4">Recent Transactions</h3>
            <div id="recentTransactionsListEl" class="placeholder-glow"> <div class="custom-card p-2 mb-2 placeholder-glow"> <div class="d-flex justify-content-between"> <span class="placeholder col-5" style="height: 16px;"></span> <span class="placeholder col-3" style="height: 16px;"></span> </div> <div class="small text-secondary mt-1"><span class="placeholder col-6" style="height: 14px;"></span></div> </div> <p class="text-secondary text-center mt-3" id="noTransactionsMessageEl" style="display: none;">Loading transactions...</p> </div>
        </section>

        <!-- Leaderboard Section (NEW) -->
        <section id="leaderboard-section" class="section">
            <h2 class="section-title">Top Players</h2>
            <div id="leaderboardListEl" class="placeholder-glow">
                 <!-- Placeholder Leaderboard Item -->
                <div class="leaderboard-item placeholder-glow mb-2">
                    <span class="placeholder col-1" style="height: 30px; width: 35px;"></span>
                    <span class="placeholder col-2 ms-2 me-3" style="height: 45px; width: 45px; border-radius: 50%;"></span>
                    <div style="flex-grow: 1;">
                         <span class="placeholder col-6 d-block" style="height: 20px;"></span>
                    </div>
                    <span class="placeholder col-3" style="height: 20px;"></span>
                </div>
                <div class="leaderboard-item placeholder-glow mb-2">
                    <span class="placeholder col-1" style="height: 30px; width: 35px;"></span>
                    <span class="placeholder col-2 ms-2 me-3" style="height: 45px; width: 45px; border-radius: 50%;"></span>
                    <div style="flex-grow: 1;">
                         <span class="placeholder col-5 d-block" style="height: 20px;"></span>
                    </div>
                    <span class="placeholder col-4" style="height: 20px;"></span>
                </div>
                 <div class="leaderboard-item placeholder-glow mb-2">
                    <span class="placeholder col-1" style="height: 30px; width: 35px;"></span>
                    <span class="placeholder col-2 ms-2 me-3" style="height: 45px; width: 45px; border-radius: 50%;"></span>
                    <div style="flex-grow: 1;">
                         <span class="placeholder col-6 d-block" style="height: 20px;"></span>
                    </div>
                    <span class="placeholder col-3" style="height: 20px;"></span>
                </div>
            </div>
             <p id="noLeaderboardMessageEl" class="text-secondary text-center mt-4" style="display: none;">Leaderboard is empty.</p>
        </section>

        <!-- Profile Section -->
        <section id="profile-section" class="section">
            <div class="profile-header-card placeholder-glow">
                <img loading="lazy" decoding="async" fetchpriority="low" src="https://via.placeholder.com/70" alt="Avatar" class="profile-avatar" id="profileAvatarEl">
                <div class="profile-name-container mt-2">
                    <h3 class="profile-name" id="profileNameEl"><span class="placeholder col-6"></span></h3>
                    <button class="edit-name-btn" id="editNameBtnEl"><i class="bi bi-pencil-square"></i></button>
                </div>
                <p class="profile-email" id="profileEmailEl"><span class="placeholder col-8"></span></p>
                <div class="profile-stats w-100"> <div class="stat-item"><strong id="profileTotalMatchesEl"><span class="placeholder col-4"></span></strong><span>Matches Played</span></div> <div class="stat-item"><strong id="profileWonMatchesEl"><span class="placeholder col-4"></span></strong><span>Matches Won</span></div> <div class="stat-item"><strong id="profileTotalEarningsEl"><span class="placeholder col-4"></span></strong><span>Total Winnings</span></div> </div>
            </div>

            <!-- ======================================================= -->
            <!-- ================ MODIFIED SECTION START =============== -->
            <!-- ======================================================= -->
            <div class="profile-links">

                <!-- Account Links -->
                <h4 class="profile-card-title"><i class="bi bi-person-circle"></i> My Account</h4>
                <div class="custom-card mb-4">
                    <div class="list-group">
                        <label class="list-group-item list-group-item-action d-flex justify-content-between align-items-center interactive-list-item">
                            <span><i class="bi bi-bell-fill"></i> Notifications</span>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" role="switch" id="notificationSwitchEl" checked>
                            </div>
                        </label>
                        <!-- =========== NEW "MY STATS" BUTTON ADDED HERE =========== -->
                        <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center interactive-list-item" id="myStatsBtn">
                            <span><i class="bi bi-bar-chart-line-fill"></i> My Stats</span>
                            <i class="bi bi-chevron-right"></i>
                        </a>
                        <!-- ========================================================== -->
                        <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center interactive-list-item" id="matchHistoryBtn">
                            <span><i class="bi bi-clock-history"></i> Match History</span>
                            <i class="bi bi-chevron-right"></i>
                        </a>
                        <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center interactive-list-item" id="transactionHistoryBtn">
                            <span><i class="bi bi-receipt-cutoff"></i> Transaction History</span>
                            <i class="bi bi-chevron-right"></i>
                        </a>
                        <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center interactive-list-item" id="changePasswordBtn">
                            <span><i class="bi bi-key-fill"></i> Change Password</span>
                            <i class="bi bi-chevron-right"></i>
                        </a>
                        <!-- =========== NEW PROMO CODE BUTTON =========== -->
                        <a href="#" id="promoCodeBtn" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center interactive-list-item">
                            <span><i class="bi bi-gift-fill"></i> Promo Code</span>
                            <i class="bi bi-chevron-right"></i>
                        </a>
                         <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center interactive-list-item" data-policy="refer">
                            <span><i class="bi bi-people-fill"></i> Refer & Earn</span>
                            <i class="bi bi-chevron-right"></i>
                        </a>
                    </div>
                </div>

                <!-- Support & Policies Links -->
                <h4 class="profile-card-title"><i class="bi bi-shield-check"></i> Support & Policies</h4>
                <div class="custom-card mb-4">
                    <div class="list-group">
                        <!-- ============ NEW LIVE SUPPORT BUTTON ADDED HERE ============ -->
                        <a href="#" id="liveSupportBtn" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center interactive-list-item">
                            <span><i class="bi bi-chat-quote-fill"></i> Live Support</span>
                            <i class="bi bi-chevron-right"></i>
                        </a>
                        <!-- ========================================================== -->
                        <a href="#" id="contactUsBtnEl" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center interactive-list-item">
                            <span><i class="bi bi-headset"></i> Contact Us</span>
                            <i class="bi bi-chevron-right"></i>
                        </a>
                        <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center interactive-list-item" data-policy="privacy">
                            <span><i class="bi bi-shield-lock-fill"></i> Privacy Policy</span>
                            <i class="bi bi-chevron-right"></i>
                        </a>
                        <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center interactive-list-item" data-policy="about">
                            <span><i class="bi bi-info-circle-fill"></i> About Us</span>
                            <i class="bi bi-chevron-right"></i>
                        </a>
                        <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center interactive-list-item" data-policy="updates">
                            <span><i class="bi bi-arrow-repeat"></i> Updates</span>
                            <i class="bi bi-chevron-right"></i>
                        </a>
                        <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center interactive-list-item" data-policy="partner">
                            <span><i class="bi bi-people-fill"></i> Partner</span>
                            <i class="bi bi-chevron-right"></i>
                        </a>

                        <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center interactive-list-item" data-policy="terms">
                            <span><i class="bi bi-file-text-fill"></i> Terms of Service</span>
                            <i class="bi bi-chevron-right"></i>
                        </a>
                        <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center interactive-list-item" data-policy="refund">
                            <span><i class="bi bi-arrow-repeat"></i> Refund Policy</span>
                            <i class="bi bi-chevron-right"></i>
                        </a>
                        <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center interactive-list-item" data-policy="fairPlay">
                            <span><i class="bi bi-patch-check-fill"></i> Fair Play Policy</span>
                            <i class="bi bi-chevron-right"></i>
                        </a>
                    </div>
                </div>

                <!-- Logout Card -->
                <div class="custom-card">
                    <div class="list-group">
                        <button class="list-group-item list-group-item-action text-danger d-flex justify-content-between align-items-center interactive-list-item" id="logoutProfileBtnEl">
                            <span><i class="bi bi-box-arrow-right"></i> Logout</span>
                            <span></span>
                        </button>
                    </div>
                </div>

            </div>
            <!-- ======================================================= -->
            <!-- ================= MODIFIED SECTION END ================ -->
            <!-- ======================================================= -->

        </section>

        <!-- ============ NEW LIVE SUPPORT SECTION ADDED HERE ============ -->
        <section id="live-support-section" class="section">
            <h2 class="section-title">Live Support</h2>
            <p class="text-secondary text-center mb-3">Chat with our support team in real-time.</p>
            <div class="custom-card">
                <div id="liveChatMessagesEl">
                    <!-- Chat messages will be loaded here by JavaScript -->
                    <div class="text-center p-5 text-secondary">
                        <div class="spinner-border spinner-border-sm"></div>
                        <div>Loading chat...</div>
                    </div>
                </div>
                <div class="live-chat-footer">
                    <form id="liveChatForm" class="d-flex w-100 gap-2">
                        <input type="text" class="form-control" id="liveChatMessageInput" placeholder="Type your message..." required autocomplete="off">
                        <button type="submit" class="btn btn-custom btn-custom-primary">
                            <i class="bi bi-send-fill"></i>
                        </button>
                    </form>
                </div>
            </div>
        </section>
        <!-- ========================================================== -->

        <!-- RECHARGE SECTION -->
        <section id="recharge-section" class="section">
            <div id="recharge-step-1-amount">
                <div class="text-center mb-4">
                    <p class="text-secondary mb-1">Deposit Balance</p>
                    <h2 class="fw-bold"><span id="rechargeBalanceDisplay">0.00</span></h2>
                </div>
                <div class="recharge-card">
                    <label class="form-label text-center d-block">Amount</label>
                    <div class="amount-input-group">
                        <span class="rupee-symbol"></span>
                        <input type="number" class="form-control" id="rechargeAmountInput" placeholder="10 - 1000" min="10" max="1000">
                    </div>
                    <div class="d-flex justify-content-between mt-2">
                        <small class="text-secondary">Minimum: 10</small>
                        <small class="text-secondary">Maximum: 10000</small>
                    </div>
                    <div class="amount-presets">
                        <button class="amount-preset-btn" data-amount="20">20</button>
                        <button class="amount-preset-btn" data-amount="50">50</button>
                        <button class="amount-preset-btn" data-amount="100">100</button>
                        <button class="amount-preset-btn" data-amount="200">200</button>
                        <button class="amount-preset-btn" data-amount="500">500</button>
                        <button class="amount-preset-btn" data-amount="1000">1000</button>
                    </div>
                </div>
                <div id="rechargeStep1Status" class="alert" style="display: none;"></div>
                <div class="d-grid">
                    <button class="btn btn-custom btn-custom-primary btn-lg" id="goToStep2Btn">Recharge</button>
                </div>
            </div>
            <div id="recharge-step-2-method" style="display: none;">
                <div class="text-center mb-4">
                    <p class="text-secondary mb-1">Recharge Amount</p>
                    <h2 class="fw-bold"><span id="rechargeAmountConfirm">20</span></h2>
                </div>
                <h3 class="section-title">Select Payment Method</h3>
                <div id="paymentOptionsContainer">
                    <div class="payment-option-card">
                        <div class="d-flex align-items: center">
                            <img loading="lazy" decoding="async" fetchpriority="low" src="https://i.ibb.co/CK4YGNCd/phone-pay.png" alt="PhonePe" class="me-3">
                            <span class="fw-bold">PhonePe</span>
                        </div>
                        <input class="form-check-input" type="radio" name="paymentMethod" id="pay-phonepe" value="PhonePe">
                    </div>
                    <div class="payment-option-card">
                        <div class="d-flex align-items: center">
                            <img loading="lazy" decoding="async" fetchpriority="low" src="https://pwebassets.paytm.com/commonwebassets/ir/images/press-kit/brand.png" alt="Paytm" class="me-3">
                             <span class="fw-bold">Paytm</span>
                        </div>
                        <input class="form-check-input" type="radio" name="paymentMethod" id="pay-paytm" value="Paytm">
                    </div>
                    <div class="payment-option-card">
                        <div class="d-flex align-items: center">
                            <img loading="lazy" decoding="async" fetchpriority="low" src="https://telecomtalk.info/wp-content/uploads/2022/12/gpay-how-to-create-or-find-upi.jpg.webp" alt="GPay" class="me-3">
                            <span class="fw-bold">GPay</span>
                        </div>
                        <input class="form-check-input" type="radio" name="paymentMethod" id="pay-gpay" value="GPay">
                    </div>
                </div>
                <div id="rechargeStep2Status" class="alert" style="display: none;"></div>
                <div class="d-grid mt-4">
                    <button class="btn btn-custom btn-custom-primary btn-lg" id="goToStep3Btn">Process to Pay</button>
                </div>
            </div>
            <div id="recharge-step-3-payment" style="display: none;">
                <div class="text-center mb-4">
                    <p class="text-secondary mb-1">Recharge Amount</p>
                    <h2 class="fw-bold"><span id="rechargeFinalAmount">20</span></h2>
                </div>
                <div class="payment-details-card d-flex align-items-center justify-content-between mb-4">
                    <div>
                        <p class="text-secondary mb-1">Payment Mode : <strong class="text-primary" id="rechargePaymentMode">PhonePe</strong></p>
                        <p class="mb-0">Upi id : <strong class="text-accent" id="rechargeUpiId">arnabsaikia609-1@okaxis</strong></p>
                    </div>
                    <div class="qr-code-container">
                        <img loading="lazy" decoding="async" fetchpriority="low" src="https://iili.io/FsMJsRV.md.png" alt="QR Code" id="rechargeQrCodeImg">
                    </div>
                </div>
                <div class="d-grid grid-cols-2 gap-2 mb-4" style="grid-template-columns: 1fr 1fr;">
                    <button class="btn btn-custom btn-custom-secondary" id="rechargeCopyAmtBtn">Copy Amt</button>
                    <button class="btn btn-custom btn-custom-secondary" id="rechargeCopyUpiBtn">Copy UPI</button>
                </div>
                <div class="vertical-stepper mb-4">
                    <div class="step-icon"><i class="bi bi-check"></i></div>
                    <div class="step-content">
                        <h5>Enter Payment UTR</h5>
                        <p>After paying, enter the transaction ID (UTR) below.</p>
                        <input type="text" class="form-control" id="rechargeUtrInput" placeholder="Enter UTR here...">
                    </div>
                </div>
                <div class="vertical-stepper">
                    <div class="step-icon"><i class="bi bi-check"></i></div>
                    <div class="step-content">
                        <h5>Submit</h5>
                         <p>Our agent will verify your payment shortly.</p>
                    </div>
                </div>
                <div id="rechargeStep3Status" class="alert mt-4" style="display: none;"></div>
                <div class="d-grid gap-2 mt-4" style="grid-template-columns: 1fr 1fr;">
                    <button class="btn btn-custom btn-custom-secondary" id="rechargeCancelBtn">Cancel</button>
                    <button class="btn btn-custom btn-custom-primary" id="rechargeSubmitBtn">Submit</button>
                </div>
            </div>
        </section>

    </main>
    
    <!-- =========== NEW PROMO CODE OVERLAY START (UPDATED HTML) =========== -->
    <div id="promoCodeOverlay" style="display: none;">
        <div class="promo-code-card">
            <button id="closePromoCodeBtn" class="promo-code-close-btn">&times;</button>
            <h3 class="promo-card-title">Redeem Your Code</h3>
            <div class="promo-code-header">
                <div class="gift-icon-wrapper">
                    <i class="bi bi-gift-fill"></i>
                </div>
                <p id="promoCodeMessageEl" class="text-secondary">Enter a code to claim your reward.</p>
            </div>
            <div class="promo-code-body">
                <div class="form-group">
                    <input type="text" id="promoCodeInput" class="form-control" placeholder="Enter promo code">
                    <div id="promoCodeStatusMessage" class="promo-code-status"></div>
                </div>
                <button id="redeemPromoCodeBtn" class="btn btn-custom btn-custom-accent w-100">Redeem</button>
            </div>
        </div>
    </div>
    <!-- =========== NEW PROMO CODE OVERLAY END =========== -->

    <!-- Modals -->
    <div class="modal fade" id="policyModalEl" tabindex="-1"><div class="modal-dialog modal-dialog-scrollable modal-lg"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="policyModalTitleEl">Details</h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button></div><div class="modal-body" id="policyModalBodyEl" style="min-height: 300px;"></div></div></div></div>
    <div class="modal fade" id="addAmountModalEl" tabindex="-1"><div class="modal-dialog modal-dialog-centered"><div class="modal-content"><div class="modal-header"><h5 class="modal-title"><i class="bi bi-wallet-fill me-2"></i> How to Add Amount?</h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button></div><div class="modal-body"><p>To add amount, pay via UPI/PhonePe to:</p><p class="text-center text-warning"><strong>UPI ID/Number:</strong> <span class="phonepe-number">[!!! YOUR UPI ID/NUMBER HERE !!!]</span></p><p class="mt-3 small"><strong><i class="bi bi-exclamation-triangle-fill text-warning"></i> IMPORTANT:</strong> After payment, contact admin via [!!! ADMIN CONTACT INFO HERE !!!] with registered Email (<strong id="modalUserEmailEl">...</strong>) & payment screenshot. Amount added manually after verification.</p></div><div class="modal-footer"><button type="button" class="btn btn-custom btn-custom-secondary" data-bs-dismiss="modal">Got it</button></div></div></div></div>
    <div class="modal fade" id="withdrawModalEl" tabindex="-1"><div class="modal-dialog modal-dialog-centered"><div class="modal-content"><div class="modal-header"><h5 class="modal-title"><i class="bi bi-cash-coin me-2"></i> Withdraw Funds</h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button></div><div class="modal-body"><p class="small text-secondary">Withdrawable balance: <strong class="text-light" id="withdrawModalBalanceEl">0.00</strong></p><div class="mb-3"><label for="withdrawAmountInputEl" class="form-label">Amount (Min <span id="minWithdrawAmountEl">50</span>)</label><input type="number" class="form-control" id="withdrawAmountInputEl" placeholder="Enter amount"></div><div class="mb-3"><label for="withdrawMethodInputEl" class="form-label">Withdrawal Method (UPI/Bank)</label><input type="text" class="form-control" id="withdrawMethodInputEl" placeholder="Enter UPI ID / Bank Details"></div><div id="withdrawStatusMessageEl" class="alert mt-3" style="display: none;"></div></div><div class="modal-footer"><button type="button" class="btn btn-custom btn-custom-secondary" data-bs-dismiss="modal">Cancel</button><button type="button" class="btn btn-custom btn-custom-primary" id="submitWithdrawRequestBtnEl">Submit Request</button></div></div></div></div>
    <div class="modal fade" id="idPasswordModalEl" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Room ID & Password</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body text-center">
                <p class="small text-secondary">ID/Pass shown shortly before match start.</p>
                <div class="my-3 p-3" style="background: var(--primary-bg); border-radius: 8px;">
                    <p class="mb-1">Room ID:</p>
                    <h4 id="roomIdDisplayEl" class="text-accent referral-code placeholder-glow d-inline-block">
                        <span class="placeholder col-6"></span>
                    </h4>
                    <button class="btn btn-sm btn-outline-warning ms-2 copy-btn" data-target="#roomIdDisplayEl" title="Copy Room ID">
                        <i class="bi bi-clipboard"></i>
                    </button>
                </div>
                <div class="my-3 p-3" style="background: var(--primary-bg); border-radius: 8px;">
                    <p class="mb-1">Password:</p>
                    <h4 id="roomPasswordDisplayEl" class="text-accent referral-code placeholder-glow d-inline-block">
                        <span class="placeholder col-6"></span>
                    </h4>
                    <button class="btn btn-sm btn-outline-warning ms-2 copy-btn" data-target="#roomPasswordDisplayEl" title="Copy Password">
                        <i class="bi bi-clipboard"></i>
                    </button>
                </div>
                <div class="my-3 p-3" style="background: var(--primary-bg); border-radius: 8px;">
                    <p class="mb-1">Your Slot:</p>
                    <h4 id="roomSlotDisplayEl" class="text-accent referral-code placeholder-glow d-inline-block">
                        <span class="placeholder col-4"></span>
                    </h4>
                </div>
                <p class="small mt-1" style="color:#9ca3af;">
                    Note: Be in your assigned slot, otherwise you will be kicked out
                </p>
                <p class="small text-warning mt-1">
                    <i class="bi bi-exclamation-triangle"></i> Don't share ID/Password.
                </p>
            </div>
        </div>
    </div>
</div>
    <div class="modal fade" id="joinTournamentDetailsModal" tabindex="-1"><div class="modal-dialog modal-dialog-centered"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">Enter Your Details to Join</h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button></div><div class="modal-body">
        <p>Entry Fee: <strong id="joinFeeDisplayEl" class="text-accent">0.00</strong></p>
        <form id="joinTournamentForm">
            <input type="hidden" id="joinTournamentIdInput">
            <input type="hidden" id="joinTournamentFeeInput">
            <input type="hidden" id="joinTournamentModeInput">
            <div class="mb-3">
                <label for="joinUsernameInput" class="form-label">Your In-Game Name</label>
                <input type="text" class="form-control" id="joinUsernameInput" placeholder="Enter your in-game name" required>
            </div>
            <div class="mb-3">
                <label for="joinGameUidInput" class="form-label">Your Free Fire UID</label>
                <input type="text" class="form-control" id="joinGameUidInput" placeholder="Enter your in-game UID" required>
            </div>

            <!-- Team Fields Container -->
            <div id="joinTeamFieldsContainer" style="display: none;">
                <hr>
                <h6 class="text-accent">Teammate Details</h6>
                <!-- Teammate fields will be dynamically added here -->
            </div>

            <div id="joinTournamentStatusMessageEl" class="alert mt-3" style="display: none;"></div>
        </form>
    </div><div class="modal-footer"><button type="button" class="btn btn-custom btn-custom-secondary" data-bs-dismiss="modal">Cancel</button><button type="button" class="btn btn-custom btn-custom-accent" id="confirmJoinBtn">Confirm & Join</button></div></div></div></div>
    <div class="modal fade" id="notificationsModalEl" tabindex="-1"><div class="modal-dialog modal-dialog-scrollable modal-lg"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">Notifications</h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button></div><div class="modal-body"><div id="notificationsListEl"></div><p id="notificationsEmptyMsgEl" class="text-center text-secondary mt-4" style="display: none;">No notifications yet.</p></div></div></div></div>

    <!-- NEW MATCH HISTORY MODAL -->
    <div class="modal fade" id="matchHistoryModal" tabindex="-1">
        <div class="modal-dialog modal-fullscreen modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="bi bi-clock-history"></i> Match History</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="matchHistoryBodyEl">
                    <!-- History cards will be loaded here by JS -->
                </div>
            </div>
        </div>
    </div>

    <!-- NEW TRANSACTION HISTORY MODAL -->
    <div class="modal fade" id="transactionHistoryModal" tabindex="-1">
        <div class="modal-dialog modal-fullscreen modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="bi bi-receipt-cutoff"></i> Transaction History</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="transactionHistoryBodyEl">
                    <!-- History cards will be loaded here by JS -->
                </div>
            </div>
        </div>
    </div>

    <!-- NEW TOURNAMENT CHAT MODAL -->
    <div class="modal fade" id="tournamentChatModal" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="tournamentChatModalTitle">Tournament Chat</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body p-0 d-flex flex-column">
                    <div id="chatMessagesEl" class="flex-grow-1">
                        <!-- Chat messages will be loaded here in reverse order -->
                    </div>
                    <div id="chatReplyContextEl" style="display: none;">
                        <div class="reply-context-header">
                            Replying to <strong id="replyToNameEl">...</strong>
                            <button type="button" id="cancelReplyBtn">&times;</button>
                        </div>
                        <p id="replyToMessageEl">...</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <form id="chatForm" class="d-flex w-100 gap-2">
                        <input type="text" class="form-control" id="chatMessageInput" placeholder="Type a message..." required autocomplete="off">
                        <button type="submit" class="btn btn-custom btn-custom-primary">
                            <i class="bi bi-send-fill"></i>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- NEW EDIT NAME MODAL -->
    <div class="modal fade" id="editNameModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Change Your Name</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="editNameForm">
                        <div class="mb-3">
                            <label for="editNameInput" class="form-label">New Name</label>
                            <input type="text" class="form-control" id="editNameInput" required>
                        </div>
                        <div id="editNameStatusMessage" class="alert" style="display: none;"></div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-custom btn-custom-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-custom btn-custom-primary" id="saveNameChangeBtn">Save</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ================================== -->
    <!-- ==== NEW CHANGE PASSWORD MODAL === -->
    <!-- ================================== -->
    <div class="modal fade" id="changePasswordModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Change Password</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="changePasswordForm" novalidate>
                        <div class="mb-3">
                            <label for="currentPasswordInput" class="form-label">Current Password</label>
                            <div class="input-group-wrapper">
                                <input type="password" class="form-control" id="currentPasswordInput" required>
                                <button type="button" class="password-toggle-btn"><i class="bi bi-eye-slash"></i></button>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="newPasswordInput" class="form-label">New Password</label>
                            <div class="input-group-wrapper">
                                <input type="password" class="form-control" id="newPasswordInput" required>
                                <button type="button" class="password-toggle-btn"><i class="bi bi-eye-slash"></i></button>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="confirmNewPasswordInput" class="form-label">Confirm New Password</label>
                             <div class="input-group-wrapper">
                                <input type="password" class="form-control" id="confirmNewPasswordInput" required>
                                <button type="button" class="password-toggle-btn"><i class="bi bi-eye-slash"></i></button>
                            </div>
                        </div>
                        <div id="changePasswordStatusMessage" class="alert" style="display: none;"></div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-custom btn-custom-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-custom btn-custom-primary" id="savePasswordChangeBtn">Save Changes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- =========== UPDATED "MY STATS" MODAL =========== -->
    <div class="modal fade" id="myStatsModal" tabindex="-1" aria-labelledby="myStatsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content"> <!-- The background is now handled by CSS -->
                <div class="modal-header">
                    <h5 class="modal-title" id="myStatsModalLabel"><i class="bi bi-bar-chart-line-fill me-2"></i> My Stats</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="stats-container" id="statsCardContainer">
                        <!-- Stat cards -->
                        <div class="stat-card">
                            <div class="stat-card-icon"><i class="bi bi-joystick"></i></div>
                            <div class="stat-card-info">
                                <p class="stat-card-title">Matches Played</p>
                                <h3 class="stat-card-value" id="statsMatchesPlayed">0</h3>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-card-icon"><i class="bi bi-trophy-fill"></i></div>
                            <div class="stat-card-info">
                                <p class="stat-card-title">Matches Won</p>
                                <h3 class="stat-card-value" id="statsMatchesWon">0</h3>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-card-icon"><i class="bi bi-crosshair"></i></div>
                            <div class="stat-card-info">
                                <p class="stat-card-title">Total Kills</p>
                                <h3 class="stat-card-value" id="statsTotalKills">0</h3>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-card-icon"><i class="bi bi-cash-coin"></i></div>
                            <div class="stat-card-info">
                                <p class="stat-card-title">Total Winnings</p>
                                <h3 class="stat-card-value" id="statsTotalWinnings">0.00</h3>
                            </div>
                        </div>
                         <div class="stat-card">
                            <div class="stat-card-icon"><i class="bi bi-person-plus-fill"></i></div>
                            <div class="stat-card-info">
                                <p class="stat-card-title">Referral Earnings</p>
                                <h3 class="stat-card-value" id="statsReferralEarnings">0.00</h3>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- ======================================================= -->


    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <button class="nav-item active" data-section="home-section"><i class="bi bi-house-door-fill"></i><span>Home</span></button>
        <button class="nav-item" data-section="wallet-section"><i class="bi bi-wallet-fill"></i><span>Wallet</span></button>
        <button class="nav-item" data-section="leaderboard-section"><i class="bi bi-trophy-fill" style="font-size:26px;"></i></button>
        
        <button class="nav-item" data-section="news-section" id="navNewsBtn"><i class="bi bi-megaphone-fill"></i><span>Announcements</span></button>
<button class="nav-item" data-section="profile-section"><i class="bi bi-person-fill"></i><span>Profile</span></button>
    </nav>

    <!-- NEWS SECTION -->
    <section id="news-section" class="section" style="display:none;">
      <div class="main-content">
        <h2 class="section-title"><i class="bi bi-megaphone-fill" style="margin-right:6px;"></i>Announcements</h2>
        <div id="newsListEl" class="row g-3"></div>
        <div id="newsEmptyEl" class="text-center text-secondary" style="display:none;">No Announcementyet yet</div>
      </div>
    </section>
    

    <!-- JS Libraries -->
    <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <!-- Firebase SDK & App Logic -->
    <script type="module" src="main.js"></script>


<script>
(function(){
  function safeAudio(id){
    try{
      var el=document.getElementById(id);
      if(el){
        fetch(el.src,{method:'HEAD'}).then(function(r){
          if(!r.ok){ el.removeAttribute('src'); }
        }).catch(function(){ el.removeAttribute('src'); });
      }
    }catch(e){}
  }
  // try to guard known audio elements if present
  safeAudio('bgMusic');
  safeAudio('clickSound');
})();
</script>


<script>
(function(){
  // Section switcher fallback (if project doesn't already have one)
  if (typeof window.showSection !== 'function') {
    window.showSection = function(id){
      document.querySelectorAll('.section').forEach(s=> s.style.display='none');
      var el = document.getElementById(id); if (el) el.style.display='block';
      document.querySelectorAll('.bottom-nav .nav-item').forEach(n=> n.classList.remove('active'));
      var btn = document.querySelector('.bottom-nav .nav-item[data-section="'+id+'"]');
      if (btn) btn.classList.add('active');
    };
  }

  // Click to open News
  const newsBtn = document.getElementById('navNewsBtn');
  if (newsBtn) {
    newsBtn.addEventListener('click', function(){
      showSection('news-section');
      __loadNewsOnce();
    });
  }

  // Realtime news loader (runs once, keeps subscribed)
  let __newsBound = false;
  function __getDb(){
    try { if (typeof db !== 'undefined' && db) return db; } catch(e){}
    try {
      if (typeof getApps==='function' && getApps().length) {
        const a = (typeof getApp==='function') ? getApp() : null;
        if (a && typeof getDatabase==='function') return getDatabase(a);
      }
    } catch(e){}
    try { if (typeof getDatabase==='function') return getDatabase(); } catch(e){}
    return null;
  }

  function __loadNewsOnce(){
    if (__newsBound) return;
    const d = __getDb();
    if (!d) { console.warn('News: DB not ready'); return; }
    __newsBound = true;
    const listEl = document.getElementById('newsListEl');
    const emptyEl = document.getElementById('newsEmptyEl');
    const nref = ref(d, 'news');
    onValue(nref, function(snap){
      const items = [];
      snap.forEach(function(ch){ const v = ch.val() || {}; v.id = ch.key; items.push(v); });
      items.sort(function(a,b){ return ((b.createdAt||b.timestamp||0) - (a.createdAt||a.timestamp||0)); });
      listEl.innerHTML='';
      if (!items.length){ emptyEl.style.display='block'; return; }
      emptyEl.style.display='none';
      items.forEach(function(n){
        const title = n.title || n.tittle || '';
        const when = n.createdAt || n.timestamp || 0;
        const img = n.imageUrl ? ('<img loading="lazy" decoding="async" fetchpriority="low" src="'+n.imageUrl+'" class="card-img-top" style="height:160px;object-fit:cover;border-radius:8px 8px 0 0;">') : '';
        const card = document.createElement('div');
        card.className = 'col-12';
        card.innerHTML = '<div class="custom-card p-0">'+
            img+
            '<div class="p-3">'+
              (title ? '<h5 class="mb-2">'+title+'</h5>' : '')+
              (n.content ? '<p class="mb-2" style="white-space:pre-wrap">'+(n.content||'')+'</p>' : '')+
              '<div class="text-secondary small">'+ (when ? new Date(when).toLocaleString() : '') +'</div>'+
            '</div>'+
          '</div>';
        listEl.appendChild(card);
      });
    });
  }

  // If user deep-links to #news
  if (location.hash === '#news') {
    showSection('news-section');
    __loadNewsOnce();
  }
})();
</script>


<script>
// v6: ensure dark skin persists after navigation / re-render
(function(){
  function applyNewsSkin(){
    var cards = document.querySelectorAll('#news-section .custom-card');
    cards.forEach(function(el){
      el.style.background = '#121212';
      el.style.color = '#e5e7eb';
      el.style.border = '1px solid rgba(255,255,255,0.08)';
      el.style.borderRadius = '16px';
      el.style.boxShadow = '0 2px 10px rgba(0,0,0,0.35)';
    });
  }
  // Run when DOM updates
  const newsSec = document.getElementById('news-section');
  if (newsSec) {
    const mo = new MutationObserver(function(){ applyNewsSkin(); });
    mo.observe(newsSec, { childList:true, subtree:true });
    // initial
    applyNewsSkin();
  }
  // Patch showSection to call skinner when news is shown
  if (typeof window.showSection === 'function' && !window.__SHOWSECTION_PATCHED_V6){
    window.__SHOWSECTION_PATCHED_V6 = true;
    const __orig = window.showSection;
    window.showSection = function(id){
      try { return __orig.apply(this, arguments); }
      finally { if (id === 'news-section') { setTimeout(applyNewsSkin, 0); } }
    };
  }
  // Also listen to nav button
  document.getElementById('navNewsBtn')?.addEventListener('click', function(){ setTimeout(applyNewsSkin, 0); });
  // Expose for manual trigger if needed
  window.__applyNewsSkin = applyNewsSkin;
})();
</script>


<script>
// v8: clicking the header logo opens Wallet section
(function(){
  var logo = document.getElementById('appLogoEl');
  function openWallet(){ 
    if (typeof showSection === 'function') { showSection('wallet-section'); }
    else { window.location.hash = '#wallet-section'; }
  }
  if (logo && !logo.__walletBound){ 
    logo.__walletBound = true; 
    logo.addEventListener('click', openWallet);
  }
  // also if header is rendered later, re-bind on DOM changes
  var hdr = document.body;
  if (hdr && !window.__walletMo){
    window.__walletMo = new MutationObserver(function(){
      var l = document.getElementById('appLogoEl');
      if (l && !l.__walletBound){ l.__walletBound = true; l.style.cursor='pointer'; l.addEventListener('click', openWallet); }
    });
    window.__walletMo.observe(hdr, { childList:true, subtree:true });
  }
})();
</script>


<script>
// v13: username click opens profile and focuses name editor
(function(){
  function bindUserNameClick(){
    var el = document.getElementById('headerUserGreetingEl');
    if(!el || el.__v13Bound) return;
    el.__v13Bound = true;
    el.addEventListener('click', function(){
      try{
        if(typeof showSection === 'function'){ showSection('profile-section'); }
        // focus after section shows
        setTimeout(function(){
          var input = document.getElementById('editNameInput') 
                   || document.getElementById('profileNameInput') 
                   || document.querySelector('#profile-section input[type="text"]');
          if(input){ input.focus(); input.select && input.select(); }
        }, 200);
      }catch(e){ console.warn('v13 username click err', e); }
    });
  }
  // initial and after mutations
  bindUserNameClick();
  var mo = new MutationObserver(bindUserNameClick);
  mo.observe(document.body, {childList:true, subtree:true});
})();
</script>


<script>
// v14: Click on username => open "Change Your Name" modal directly
(function(){
  function ensureBootstrapModal(){
    // bootstrap 5 expected on window.bootstrap
    if (window.bootstrap && typeof window.bootstrap.Modal === 'function') return true;
    return false;
  }
  function openEditNameModal(){
    var mEl = document.getElementById('editNameModal');
    if(!mEl){ console.warn('editNameModal not found'); return; }
    if (ensureBootstrapModal()){
      try{
        var modal = window.__editNameModalInstance || (window.__editNameModalInstance = new bootstrap.Modal(mEl, {backdrop:true}));
        modal.show();
      }catch(e){ console.warn('Bootstrap modal show error', e); mEl.style.display='block'; }
    } else {
      // fallback: simple display
      mEl.style.display='block';
      mEl.classList.add('show');
    }
    setTimeout(function(){
      var input = document.getElementById('editNameInput');
      if(input){ input.focus(); input.select && input.select(); }
    }, 200);
  }
  function bind(){
    var nameEl = document.getElementById('headerUserGreetingEl');
    if(nameEl && !nameEl.__nameModalBound){
      nameEl.__nameModalBound = true;
      nameEl.style.cursor = 'pointer';
      nameEl.addEventListener('click', function(e){
        e.preventDefault();
        openEditNameModal();
      });
    }
  }
  bind();
  var mo = new MutationObserver(bind);
  mo.observe(document.body, {childList:true, subtree:true});
})();
</script>


<script>
// v15: Notifications switch logic (localStorage + browser permission)
(function(){
  const SWITCH_ID = 'notificationSwitchEl';
  const STORAGE_KEY = 'notifEnabled';
  function $(id){ return document.getElementById(id); }

  function initSwitchState(){
    const sw = $(SWITCH_ID);
    if(!sw) return;
    const saved = localStorage.getItem(STORAGE_KEY);
    if(saved !== null){
      sw.checked = saved === '1';
    } else {
      // default on if markup had checked
      localStorage.setItem(STORAGE_KEY, sw.checked ? '1' : '0');
    }
  }

  async function handleToggle(e){
    const sw = e.currentTarget;
    if(sw.checked){
      // Request notification permission
      try{
        if (!('Notification' in window)){
          alert('Notifications are not supported in this browser.');
          sw.checked = false;
          localStorage.setItem(STORAGE_KEY, '0');
          return;
        }
        const perm = await Notification.requestPermission();
        if(perm === 'granted'){
          localStorage.setItem(STORAGE_KEY, '1');
          // Optional: show a sample notification
          try{ new Notification('Notifications enabled', { body: 'You will receive alerts here.' }); }catch(_){}
        } else {
          sw.checked = false;
          localStorage.setItem(STORAGE_KEY, '0');
          alert('Permission denied. Notifications remain off.');
        }
      }catch(err){
        console.warn('Notification perm error', err);
        sw.checked = false;
        localStorage.setItem(STORAGE_KEY, '0');
      }
    } else {
      localStorage.setItem(STORAGE_KEY, '0');
    }
  }

  function bind(){
    const sw = $(SWITCH_ID);
    if(!sw || sw.__boundV15) return;
    sw.__boundV15 = true;
    sw.addEventListener('change', handleToggle);
  }

  // init
  initSwitchState();
  bind();
  // re-bind if DOM changes
  const mo = new MutationObserver(() => bind());
  mo.observe(document.body, { childList: true, subtree: true });
})();
</script>


<script>
// Simple dropdown for Joined Players on match details page
document.addEventListener('DOMContentLoaded', function(){
  const toggleBtn = document.getElementById('joinedPlayersToggleBtn');
  const body = document.getElementById('joinedPlayersBody');
  const arrow = document.getElementById('joinedPlayersArrow');
  if(!toggleBtn || !body) return;
  // ensure hidden by default
  body.style.display = 'none';
  toggleBtn.addEventListener('click', function(){
    const isHidden = body.style.display === 'none' || body.style.display === '';
    body.style.display = isHidden ? 'block' : 'none';
    if(arrow){ arrow.textContent = isHidden ? '' : ''; }
  });
});
// ===== Added by assistant: ensure Mobile Number field exists under signup email =====
(function ensureSignupMobileField() {
    try {
        var emailInput = document.getElementById('signupEmailInputEl');
        if (!emailInput) return;
        if (document.getElementById('signupMobileInputEl')) return;
        var emailGroup = emailInput.closest('.mb-3') || emailInput.parentElement;
        if (!emailGroup || !emailGroup.parentElement) return;
        var wrapper = document.createElement('div');
        wrapper.className = 'mb-3';
        wrapper.innerHTML = '\n                                <label for="signupMobileInputEl" class="form-label">Mobile Number</label>\n                                <input type="tel"\n                                       class="form-control"\n                                       id="signupMobileInputEl"\n                                       placeholder="Enter mobile number"\n                                       required\n                                       maxlength="10"\n                                       pattern="[0-9]{10}"\n                                       inputmode="numeric">\n                            ';
        emailGroup.parentElement.insertBefore(wrapper, emailGroup.nextSibling);
    } catch (e) {
        console.error('Failed to inject mobile field in signup form:', e);
    }
})();
// ===== End added by assistant =====



// ===== Added by assistant: default to SIGNUP form on initial load =====
document.addEventListener('DOMContentLoaded', function () {
    try {
        if (typeof toggleAuthForm === 'function') {
            // false => show signup, true => show login
            toggleAuthForm(false);
        }
    } catch (e) {
        console.error('Failed to force signup as default:', e);
    }
});
// ===== End added by assistant =====

</script>

<script>
document.addEventListener('DOMContentLoaded', function () {
    if (typeof toggleAuthForm === 'function') {
        toggleAuthForm(false); // show signup
    }
});
</script>

</body>
</html>
